// components/SideMenu.tsx
'use client'

import Link from 'next/link'
import { Dispatch, SetStateAction } from 'react'
import { IoCloseOutline } from 'react-icons/io5'
import { BsPhone } from 'react-icons/bs'
import { FaTelegram, FaInstagram, FaWhatsapp, FaTiktok } from 'react-icons/fa'

interface SideMenuProps {
  isOpen: boolean
  setIsOpen: Dispatch<SetStateAction<boolean>>
}

export const SideMenu: React.FC<SideMenuProps> = ({ isOpen, setIsOpen }) => {
  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex">
      {/* overlay: полупрозрачный с лёгким размытием */}
      <div
        className="fixed inset-0 bg-black/30 backdrop-blur-sm"
        onClick={() => setIsOpen(false)}
      />

      {/* меню */}
      <div
        className="
          relative bg-white
          w-[320px] sm:w-[380px] lg:w-[450px]
          max-h-[950px] overflow-y-auto
          rounded-r-xl shadow-xl
        "
      >
        {/* header */}
        <div className="flex items-center justify-between px-6 py-4 border-b">
          <Link
            href="/"
            className="text-orange-500 font-bold text-[28px] leading-tight"
          >
            Türkiye Mart
          </Link>
          <div className="inline-flex border border-gray-200 rounded-[4px] divide-x divide-gray-200 overflow-hidden">
            <button
              className="
                flex-1             /* равные части */
                text-center        /* текст по центру */
                font-normal        /* font-weight: 400 */
                text-[14px]        /* font-size: 14px */
                leading-[168%]     /* line-height: 168% */
                py-1               /* padding-top/bottom: 4px */
                px-[10px]
              "
            >
              RU
            </button>
            <button
              className="
                flex-1
                text-center
                font-normal
                text-[14px]
                leading-[168%]
                py-1
                px-[10px]
              "
            >
              Тенге
            </button>
          </div>

          <button
            onClick={() => setIsOpen(false)}
            className="p-1 hover:bg-gray-100 rounded-full"
            aria-label="Close menu"
          >
            <IoCloseOutline size={24} />
          </button>
        </div>

        {/* язык/валюта */}
       

        {/* основная навигация */}
        <nav className="mx-6 py-2 border-b border-gray-200">
          <ul className="space-y-1 ">
            <NavItem href="/catalog" label="Каталог" icon={<svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M15.2 16.25L12.8937 13.9625C12.6687 14.1 12.4282 14.2033 12.1722 14.2723C11.9163 14.3413 11.6505 14.3755 11.375 14.375C10.55 14.375 9.84375 14.0813 9.25625 13.4938C8.66875 12.9063 8.375 12.2 8.375 11.375C8.375 10.55 8.66875 9.84375 9.25625 9.25625C9.84375 8.66875 10.55 8.375 11.375 8.375C12.2 8.375 12.9063 8.66875 13.4938 9.25625C14.0813 9.84375 14.375 10.55 14.375 11.375C14.375 11.6625 14.3375 11.9345 14.2625 12.191C14.1875 12.4475 14.0812 12.688 13.9437 12.9125L16.25 15.2L15.2 16.25ZM3.125 14.375C2.3 14.375 1.59375 14.0813 1.00625 13.4938C0.41875 12.9063 0.125 12.2 0.125 11.375C0.125 10.55 0.41875 9.84375 1.00625 9.25625C1.59375 8.66875 2.3 8.375 3.125 8.375C3.95 8.375 4.65625 8.66875 5.24375 9.25625C5.83125 9.84375 6.125 10.55 6.125 11.375C6.125 12.2 5.83125 12.9063 5.24375 13.4938C4.65625 14.0813 3.95 14.375 3.125 14.375ZM3.125 12.875C3.5375 12.875 3.8905 12.7283 4.184 12.4347C4.4775 12.1412 4.6245 11.788 4.625 11.375C4.6255 10.962 4.47875 10.609 4.18475 10.316C3.89075 10.023 3.5375 9.876 3.125 9.875C2.7125 9.874 2.3595 10.021 2.066 10.316C1.7725 10.611 1.6255 10.964 1.625 11.375C1.6245 11.786 1.7715 12.1392 2.066 12.4347C2.3605 12.7303 2.7135 12.877 3.125 12.875ZM11.375 12.875C11.7875 12.875 12.1407 12.7283 12.4347 12.4347C12.7288 12.1412 12.8755 11.788 12.875 11.375C12.8745 10.962 12.7277 10.609 12.4347 10.316C12.1418 10.023 11.7885 9.876 11.375 9.875C10.9615 9.874 10.6085 10.021 10.316 10.316C10.0235 10.611 9.8765 10.964 9.875 11.375C9.8735 11.786 10.0205 12.1392 10.316 12.4347C10.6115 12.7303 10.9645 12.877 11.375 12.875ZM3.125 6.125C2.3 6.125 1.59375 5.83125 1.00625 5.24375C0.41875 4.65625 0.125 3.95 0.125 3.125C0.125 2.3 0.41875 1.59375 1.00625 1.00625C1.59375 0.41875 2.3 0.125 3.125 0.125C3.95 0.125 4.65625 0.41875 5.24375 1.00625C5.83125 1.59375 6.125 2.3 6.125 3.125C6.125 3.95 5.83125 4.65625 5.24375 5.24375C4.65625 5.83125 3.95 6.125 3.125 6.125ZM11.375 6.125C10.55 6.125 9.84375 5.83125 9.25625 5.24375C8.66875 4.65625 8.375 3.95 8.375 3.125C8.375 2.3 8.66875 1.59375 9.25625 1.00625C9.84375 0.41875 10.55 0.125 11.375 0.125C12.2 0.125 12.9063 0.41875 13.4938 1.00625C14.0813 1.59375 14.375 2.3 14.375 3.125C14.375 3.95 14.0813 4.65625 13.4938 5.24375C12.9063 5.83125 12.2 6.125 11.375 6.125ZM3.125 4.625C3.5375 4.625 3.89075 4.47825 4.18475 4.18475C4.47875 3.89125 4.6255 3.538 4.625 3.125C4.6245 2.712 4.47775 2.359 4.18475 2.066C3.89175 1.773 3.5385 1.626 3.125 1.625C2.7115 1.624 2.3585 1.771 2.066 2.066C1.7735 2.361 1.6265 2.714 1.625 3.125C1.6235 3.536 1.7705 3.88925 2.066 4.18475C2.3615 4.48025 2.7145 4.627 3.125 4.625ZM11.375 4.625C11.7875 4.625 12.1407 4.47825 12.4347 4.18475C12.7288 3.89125 12.8755 3.538 12.875 3.125C12.8745 2.712 12.7277 2.359 12.4347 2.066C12.1418 1.773 11.7885 1.626 11.375 1.625C10.9615 1.624 10.6085 1.771 10.316 2.066C10.0235 2.361 9.8765 2.714 9.875 3.125C9.8735 3.536 10.0205 3.88925 10.316 4.18475C10.6115 4.48025 10.9645 4.627 11.375 4.625Z" fill="#2A2A2A" />
</svg>}/>
            <NavItem href="/profile" label="Личный кабинет" icon={<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M3.3875 11.825C4.025 11.3375 4.7375 10.9532 5.525 10.6722C6.3125 10.3912 7.1375 10.2505 8 10.25C8.8625 10.2495 9.6875 10.3903 10.475 10.6722C11.2625 10.9542 11.975 11.3385 12.6125 11.825C13.05 11.3125 13.3908 10.7312 13.6348 10.0812C13.8788 9.43125 14.0005 8.7375 14 8C14 6.3375 13.4158 4.92175 12.2473 3.75275C11.0788 2.58375 9.663 1.9995 8 2C6.337 2.0005 4.92125 2.585 3.75275 3.7535C2.58425 4.922 2 6.3375 2 8C2 8.7375 2.122 9.43125 2.366 10.0812C2.61 10.7312 2.9505 11.3125 3.3875 11.825ZM8 8.75C7.2625 8.75 6.6405 8.497 6.134 7.991C5.6275 7.485 5.3745 6.863 5.375 6.125C5.3755 5.387 5.62875 4.765 6.13475 4.259C6.64075 3.753 7.2625 3.5 8 3.5C8.7375 3.5 9.3595 3.75325 9.866 4.25975C10.3725 4.76625 10.6255 5.388 10.625 6.125C10.6245 6.862 10.3715 7.484 9.866 7.991C9.3605 8.498 8.7385 8.751 8 8.75ZM8 15.5C6.9625 15.5 5.9875 15.303 5.075 14.909C4.1625 14.515 3.36875 13.9808 2.69375 13.3063C2.01875 12.6318 1.4845 11.838 1.091 10.925C0.697501 10.012 0.500501 9.037 0.500001 8C0.499501 6.963 0.696501 5.988 1.091 5.075C1.4855 4.162 2.01975 3.36825 2.69375 2.69375C3.36775 2.01925 4.1615 1.485 5.075 1.091C5.9885 0.697 6.9635 0.5 8 0.5C9.0365 0.5 10.0115 0.697 10.925 1.091C11.8385 1.485 12.6323 2.01925 13.3063 2.69375C13.9803 3.36825 14.5148 4.162 14.9098 5.075C15.3048 5.988 15.5015 6.963 15.5 8C15.4985 9.037 15.3015 10.012 14.909 10.925C14.5165 11.838 13.9823 12.6318 13.3063 13.3063C12.6303 13.9808 11.8365 14.5152 10.925 14.9097C10.0135 15.3042 9.0385 15.501 8 15.5ZM8 14C8.6625 14 9.2875 13.9033 9.875 13.7098C10.4625 13.5163 11 13.238 11.4875 12.875C11 12.5125 10.4625 12.2345 9.875 12.041C9.2875 11.8475 8.6625 11.7505 8 11.75C7.3375 11.7495 6.7125 11.8465 6.125 12.041C5.5375 12.2355 5 12.5135 4.5125 12.875C5 13.2375 5.5375 13.5158 6.125 13.7098C6.7125 13.9038 7.3375 14.0005 8 14ZM8 7.25C8.325 7.25 8.59375 7.14375 8.80625 6.93125C9.01875 6.71875 9.125 6.45 9.125 6.125C9.125 5.8 9.01875 5.53125 8.80625 5.31875C8.59375 5.10625 8.325 5 8 5C7.675 5 7.40625 5.10625 7.19375 5.31875C6.98125 5.53125 6.875 5.8 6.875 6.125C6.875 6.45 6.98125 6.71875 7.19375 6.93125C7.40625 7.14375 7.675 7.25 8 7.25Z" fill="#2A2A2A" />
</svg>}/>
            <NavItem href="/cart" label="Корзина" icon={<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M5.25 15.5C4.8375 15.5 4.4845 15.3532 4.191 15.0597C3.8975 14.7662 3.7505 14.413 3.75 14C3.7495 13.587 3.8965 13.234 4.191 12.941C4.4855 12.648 4.8385 12.501 5.25 12.5C5.6615 12.499 6.01475 12.646 6.30975 12.941C6.60475 13.236 6.7515 13.589 6.75 14C6.7485 14.411 6.60175 14.7642 6.30975 15.0597C6.01775 15.3552 5.6645 15.502 5.25 15.5ZM12.75 15.5C12.3375 15.5 11.9845 15.3532 11.691 15.0597C11.3975 14.7662 11.2505 14.413 11.25 14C11.2495 13.587 11.3965 13.234 11.691 12.941C11.9855 12.648 12.3385 12.501 12.75 12.5C13.1615 12.499 13.5147 12.646 13.8097 12.941C14.1047 13.236 14.2515 13.589 14.25 14C14.2485 14.411 14.1017 14.7642 13.8097 15.0597C13.5177 15.3552 13.1645 15.502 12.75 15.5ZM4.6125 3.5L6.4125 7.25H11.6625L13.725 3.5H4.6125ZM3.9 2H14.9625C15.25 2 15.4688 2.12825 15.6187 2.38475C15.7687 2.64125 15.775 2.9005 15.6375 3.1625L12.975 7.9625C12.8375 8.2125 12.6532 8.40625 12.4222 8.54375C12.1912 8.68125 11.938 8.75 11.6625 8.75H6.075L5.25 10.25H13.5C13.7125 10.25 13.8907 10.322 14.0347 10.466C14.1787 10.61 14.2505 10.788 14.25 11C14.2495 11.212 14.1775 11.3902 14.034 11.5347C13.8905 11.6792 13.7125 11.751 13.5 11.75H5.25C4.6875 11.75 4.2625 11.5032 3.975 11.0097C3.6875 10.5162 3.675 10.0255 3.9375 9.5375L4.95 7.7L2.25 2H1.5C1.2875 2 1.1095 1.928 0.965999 1.784C0.822499 1.64 0.750499 1.462 0.749999 1.25C0.749499 1.038 0.821499 0.86 0.965999 0.716C1.1105 0.572 1.2885 0.5 1.5 0.5H2.71875C2.85625 0.5 2.9875 0.5375 3.1125 0.6125C3.2375 0.6875 3.33125 0.79375 3.39375 0.93125L3.9 2Z" fill="black" />
</svg>}/>
          </ul>
        </nav>

        {/* разделы информации */}
        <div className="mx-6 my-2 ">
          <Section title="Информация о компании" items={[
            { href: '/about', label: 'О нас' },
            { href: '/requisites', label: 'Реквизиты маркетплейса' },
            { href: '/contacts', label: 'Контакты' },
          ]}/>
          <Section title="Покупателям" items={[
            { href: '/faq', label: 'Вопросы и ответы' },
            { href: '/terms', label: 'Договор оферты с покупателем' },
            { href: '/returns', label: 'Возврат и обмен товара' },
            { href: '/delivery', label: 'Доставка товара' },
            { href: '/privacy', label: 'Политика конфиденциальности' },
            { href: '/terms-of-use', label: 'Правила пользования' },
            { href: '/payment', label: 'Описание процедуры оплаты' },
          ]}/>
          <Section title="Партнерам" items={[
            { href: '/sell', label: 'Продавайте на Маркетплейсе' },
            { href: '/vendor-terms', label: 'Договор оферты с продавцом' },
          ]}/>
        </div>

        {/* скачать приложение */}
        <div className="px-6 py-4 border-t flex items-center space-x-3">
          <BsPhone size={20} />
          <Link
            href="/app"
            className="font-normal text-[18px] leading-[154%] text-gray-800"
          >
            Скачать приложение Türkiye Mart
          </Link>
        </div>

        {/* соцсети */}
        <div className="px-6 py-4 border-t flex space-x-4 mb-6">
          <SocialLink href="https://t.me/turkiyemart"><FaTelegram size={24}/></SocialLink>
          <SocialLink href="https://instagram.com/turkiyemart"><FaInstagram size={24}/></SocialLink>
          <SocialLink href="https://wa.me/turkiyemart"><FaWhatsapp size={24}/></SocialLink>
          <SocialLink href="https://tiktok.com/@turkiyemart"><FaTiktok size={24}/></SocialLink>
        </div>
      </div>
    </div>
  )
}

// Навигационный пункт
const NavItem: React.FC<{
  href: string
  label: string
  icon:any
}> = ({ href, label,icon }) => (
  <li>
    <Link
  href={href}
  className="
    flex           /* делаем флекс-контейнер */
    items-center   /* вертикально по центру */
    space-x-3      /* горизонтальный gap между иконкой и текстом */
    py-2           /* вертикальные отступы */
    font-normal text-[18px] leading-[154%]
    text-gray-800 hover:text-[#2c7156]
  "
>
  {icon}
  <span>{label}</span>
</Link>
  </li>
)

// Секция со списком ссылок
const Section: React.FC<{
  title: string
  items: { href: string; label: string }[]
}> = ({ title, items }) => (
  <div className="space-y-2 border-b border-gray-200 p-4">
    <h3 className="text-gray-500 font-medium text-[16px]">{title}</h3>
    <ul className="space-y-1">
      {items.map((item, i) => (
        <li key={i}>
          <Link
            href={item.href}
            className="block font-normal text-[18px] leading-[154%] text-gray-800 hover:text-[#2c7156]"
          >
            {item.label}
          </Link>
        </li>
      ))}
    </ul>
  </div>
)

// Социальная иконка
const SocialLink: React.FC<{ href: string; children: React.ReactNode }> = ({ href, children }) => (
  <Link
    href={href}
    target="_blank"
    className="text-gray-700 hover:text-[#2c7156]"
  >
    {children}
  </Link>
)